var r=e=>o=>o;function s(e){let o=[];if(e){for(let t of e)if(t){if(Array.isArray(t)){o.push(...s(t));continue}t instanceof Promise||o.push(t.name)}}return o}var a=r("astro:config:setup")(({config:e},{plugin:o})=>{if(!o||o instanceof Promise)return!1;let t=new Set(s(e?.vite?.plugins)),n=new Set;if(typeof o=="string"&&n.add(o),typeof o=="object")if(Array.isArray(o)){let i=new Set(s(o));for(let f of i)n.add(f)}else n.add(o.name);return[...n].some(i=>t.has(i))});var c=r("astro:config:setup")((e,{plugin:o,warnDuplicated:t=!0})=>{let{updateConfig:n,logger:i}=e;t&&a(e,{plugin:o})&&i.warn(`The Vite plugin "${o.name}" is already present in your Vite configuration, this plugin may not behave correctly.`),n({vite:{plugins:[o]}})});export{c as addVitePlugin};
//# sourceMappingURL=add-vite-plugin.js.map