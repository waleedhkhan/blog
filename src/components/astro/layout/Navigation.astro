---
import { Icon } from "astro-icon/components";
import NavigationItem from "@/components/vue/NavigationItem.vue";
import ThemeSwitcher from "./ThemeSwitcher.astro";

interface Props {
  posts: { title: string; href: string }[];
}

const links = [
  { href: "/", label: "Home", icon: "lucide:home" },
  { href: "/posts", label: "Blog", icon: "lucide:newspaper" },
  { href: "/about", label: "About", icon: "lucide:user" },
  { href: "/bookmarks", label: "Bookmarks", icon: "lucide:bookmark" },
  { href: "/listening", label: "Listening", icon: "lucide:headphones" },
];

const currentPath = Astro.url.pathname;
const { posts } = Astro.props;
---

<nav class="nav-container">
  <div class="nav-bar">
    {links.map((link) => (
      <NavigationItem
        label={link.label}
        className={currentPath === link.href || (link.href !== "/" && currentPath.startsWith(link.href)) ? "active-link" : ""}
        href={link.href}
        client:load
      >
        <Icon name={link.icon} aria-label={link.label} class="nav-icon" />
      </NavigationItem>
    ))}

    <div class="nav-divider"></div>

    <ThemeSwitcher />
  </div>
</nav>

<style>
  .nav-container {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
  }

  .nav-bar {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 8px;
    border-radius: 16px;
    transition: background 0.2s ease;
  }

  .nav-divider {
    width: 1px;
    height: 24px;
    margin: 0 4px;
  }

  :global(.nav-icon) {
    width: 18px;
    height: 18px;
    stroke-width: 1.75;
  }

  /* Mobile */
  @media (max-width: 640px) {
    .nav-container {
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
    }

    .nav-bar {
      padding: 6px;
      gap: 2px;
    }

    :global(.nav-icon) {
      width: 16px;
      height: 16px;
    }
  }
</style>

<style is:global>
  /* Light mode */
  .nav-bar {
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.08);
  }

  .nav-divider {
    background: rgba(0, 0, 0, 0.1);
  }

  /* Dark mode */
  html.dark .nav-bar {
    background: #000000;
    border-color: rgba(255, 255, 255, 0.1);
  }

  html.dark .nav-divider {
    background: rgba(255, 255, 255, 0.15);
  }
</style>
